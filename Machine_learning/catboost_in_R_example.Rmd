---
title: "CatBoost random forests example in R with Shapley Values"
output: html_notebook
---


```{r}
# devtools::install_url('https://github.com/catboost/catboost/releases/download/v0.26/catboost-R-Darwin-0.26.tgz')
```


```{r}
library(catboost)
sessionInfo()
```


```{r}
features <- data.frame(feature1 = c(1, 2, 3), feature2 = factor(c('A', 'B', 'C')))
labels <- c(0, 0, 1)
train_pool <- catboost.load_pool(data = features, label = labels)
```


```{r}
model <- catboost.train(train_pool,  NULL,
    params = list(loss_function = 'Logloss',
         iterations = 100, metric_period=10))
```

```{r}
real_data <- data.frame(feature1 = c(2, 1, 3), feature2 = factor(c('D', 'B', 'C')))
real_pool <- catboost.load_pool(real_data)

prediction <- catboost.predict(model, real_pool)
print(prediction)
```

```{r}
catboost.get_feature_importance(
  model,
  pool = real_pool,
  type = "ShapValues",
  thread_count = -1,
  fstr_type = NULL
)

```

```{r}
model
```

